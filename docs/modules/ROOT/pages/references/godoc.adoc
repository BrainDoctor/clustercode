= github.com/ccremer/clustercode
:author_name: chris
:author: {author_name}
:source-highlighter: highlightjs
:icons: font
:kroki-default-format: svg
:doctype: book

= package v1alpha1



== Structs

=== Blueprint
[source, go]
----
type Blueprint struct {
    Spec      BlueprintSpec
    Status    BlueprintStatus
}
----





==== Spec BlueprintSpec


==== Status BlueprintStatus



==== Receivers

===== IsMaxParallelTaskLimitReached
[source, go]
----
func (in *Blueprint) IsMaxParallelTaskLimitReached() bool
----

IsMaxParallelTaskLimitReached will return true if the count of current task has reached MaxParallelTasks.

===== GetServiceAccountName
[source, go]
----
func (in *Blueprint) GetServiceAccountName() string
----

GetServiceAccountName retrieves a ServiceAccount name that would go along with this Blueprint.

===== DeepCopyInto
[source, go]
----
func (in *Blueprint) DeepCopyInto(out *Blueprint)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *Blueprint) DeepCopy() *Blueprint
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new Blueprint.

===== DeepCopyObject
[source, go]
----
func (in *Blueprint) DeepCopyObject() runtime.Object
----

DeepCopyObject is an autogenerated deepcopy function, copying the receiver, creating a new runtime.Object.



=== BlueprintList
[source, go]
----
type BlueprintList struct {
    Items    []Blueprint
}
----





==== Items []Blueprint



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *BlueprintList) DeepCopyInto(out *BlueprintList)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *BlueprintList) DeepCopy() *BlueprintList
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new BlueprintList.

===== DeepCopyObject
[source, go]
----
func (in *BlueprintList) DeepCopyObject() runtime.Object
----

DeepCopyObject is an autogenerated deepcopy function, copying the receiver, creating a new runtime.Object.



=== BlueprintSpec
[source, go]
----
type BlueprintSpec struct {
    ScanSchedule               string
    Storage                    StorageSpec
    MaxParallelTasks           int
    Suspend                    bool
    TaskConcurrencyStrategy    ClustercodeStrategy
    ScanSpec                   ScanSpec
    EncodeSpec                 EncodeSpec
}
----



==== ScanSchedule string


==== Storage StorageSpec
+kubebuilder:validation:Required

==== MaxParallelTasks int
+kubebuilder:default=1

==== Suspend bool


==== TaskConcurrencyStrategy ClustercodeStrategy


==== ScanSpec ScanSpec


==== EncodeSpec EncodeSpec



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *BlueprintSpec) DeepCopyInto(out *BlueprintSpec)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *BlueprintSpec) DeepCopy() *BlueprintSpec
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new BlueprintSpec.



=== ScanSpec
[source, go]
----
type ScanSpec struct {
    MediaFileExtensions    []string
}
----



==== MediaFileExtensions []string
+kubebuilder:default=mkv;mp4;avi


==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *ScanSpec) DeepCopyInto(out *ScanSpec)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *ScanSpec) DeepCopy() *ScanSpec
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new ScanSpec.



=== BlueprintStatus
[source, go]
----
type BlueprintStatus struct {
    Conditions      []metav1.Condition
    CurrentTasks    []TaskRef
}
----



==== Conditions []metav1.Condition


==== CurrentTasks []TaskRef



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *BlueprintStatus) DeepCopyInto(out *BlueprintStatus)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *BlueprintStatus) DeepCopy() *BlueprintStatus
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new BlueprintStatus.



=== TaskRef
[source, go]
----
type TaskRef struct {
    TaskName    string
}
----



==== TaskName string



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *TaskRef) DeepCopyInto(out *TaskRef)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *TaskRef) DeepCopy() *TaskRef
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new TaskRef.



=== StorageSpec
[source, go]
----
type StorageSpec struct {
    SourcePvc          ClusterCodeVolumeRef
    IntermediatePvc    ClusterCodeVolumeRef
    TargetPvc          ClusterCodeVolumeRef
}
----



==== SourcePvc ClusterCodeVolumeRef


==== IntermediatePvc ClusterCodeVolumeRef


==== TargetPvc ClusterCodeVolumeRef



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *StorageSpec) DeepCopyInto(out *StorageSpec)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *StorageSpec) DeepCopy() *StorageSpec
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new StorageSpec.



=== ClusterCodeVolumeRef
[source, go]
----
type ClusterCodeVolumeRef struct {
    ClaimName    string
    SubPath      string
}
----



==== ClaimName string
+kubebuilder:validation:Required

==== SubPath string



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *ClusterCodeVolumeRef) DeepCopyInto(out *ClusterCodeVolumeRef)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *ClusterCodeVolumeRef) DeepCopy() *ClusterCodeVolumeRef
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new ClusterCodeVolumeRef.



=== EncodeSpec
[source, go]
----
type EncodeSpec struct {
    DefaultCommandArgs      []string
    SplitCommandArgs        []string
    TranscodeCommandArgs    []string
    MergeCommandArgs        []string
    SliceSize               int
}
----



==== DefaultCommandArgs []string
+kubebuilder:default=-y;-hide_banner;-nostats

==== SplitCommandArgs []string
+kubebuilder:default=-i;"\"${INPUT}\"";-c;copy;-map;0;-segment_time;"\"${SLICE_SIZE}\"";-f;segment;"\"${OUTPUT}\""

==== TranscodeCommandArgs []string
+kubebuilder:default=-i;"\"${INPUT}\"";"-c:v";copy;"-c:a";copy;"\"${OUTPUT}\""

==== MergeCommandArgs []string
+kubebuilder:default=-f;concat;-i;concat.txt;-c;copy;media_out.mkv

==== SliceSize int



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *EncodeSpec) DeepCopyInto(out *EncodeSpec)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *EncodeSpec) DeepCopy() *EncodeSpec
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new EncodeSpec.



=== Task
[source, go]
----
type Task struct {
    Spec      TaskSpec
    Status    TaskStatus
}
----





==== Spec TaskSpec


==== Status TaskStatus



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *Task) DeepCopyInto(out *Task)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *Task) DeepCopy() *Task
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new Task.

===== DeepCopyObject
[source, go]
----
func (in *Task) DeepCopyObject() runtime.Object
----

DeepCopyObject is an autogenerated deepcopy function, copying the receiver, creating a new runtime.Object.



=== TaskList
[source, go]
----
type TaskList struct {
    Items    []Task
}
----





==== Items []Task



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *TaskList) DeepCopyInto(out *TaskList)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *TaskList) DeepCopy() *TaskList
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new TaskList.

===== DeepCopyObject
[source, go]
----
func (in *TaskList) DeepCopyObject() runtime.Object
----

DeepCopyObject is an autogenerated deepcopy function, copying the receiver, creating a new runtime.Object.



=== TaskSpec
[source, go]
----
type TaskSpec struct {
    TaskId                  ClustercodeTaskId
    Storage                 StorageSpec
    SourceUrl               ClusterCodeUrl
    TargetUrl               ClusterCodeUrl
    Suspend                 bool
    EncodeSpec              EncodeSpec
    ServiceAccountName      string
    FileListConfigMapRef    string
    ConcurrencyStrategy     ClustercodeStrategy
    SlicesPlannedCount      int
}
----



==== TaskId ClustercodeTaskId


==== Storage StorageSpec


==== SourceUrl ClusterCodeUrl


==== TargetUrl ClusterCodeUrl


==== Suspend bool


==== EncodeSpec EncodeSpec


==== ServiceAccountName string


==== FileListConfigMapRef string


==== ConcurrencyStrategy ClustercodeStrategy


==== SlicesPlannedCount int



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *TaskSpec) DeepCopyInto(out *TaskSpec)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *TaskSpec) DeepCopy() *TaskSpec
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new TaskSpec.



=== TaskStatus
[source, go]
----
type TaskStatus struct {
    Conditions              []metav1.Condition
    SlicesScheduledCount    int
    SlicesFinishedCount     int
    SlicesScheduled         []ClustercodeSliceRef
    SlicesFinished          []ClustercodeSliceRef
}
----



==== Conditions []metav1.Condition


==== SlicesScheduledCount int


==== SlicesFinishedCount int


==== SlicesScheduled []ClustercodeSliceRef


==== SlicesFinished []ClustercodeSliceRef



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *TaskStatus) DeepCopyInto(out *TaskStatus)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *TaskStatus) DeepCopy() *TaskStatus
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new TaskStatus.



=== ClustercodeSliceRef
[source, go]
----
type ClustercodeSliceRef struct {
    JobName       string
    SliceIndex    int
}
----



==== JobName string


==== SliceIndex int



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *ClustercodeSliceRef) DeepCopyInto(out *ClustercodeSliceRef)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *ClustercodeSliceRef) DeepCopy() *ClustercodeSliceRef
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new ClustercodeSliceRef.



=== ClustercodeStrategy
[source, go]
----
type ClustercodeStrategy struct {
    ConcurrentCountStrategy    *ClustercodeCountStrategy
}
----



==== ConcurrentCountStrategy *ClustercodeCountStrategy



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *ClustercodeStrategy) DeepCopyInto(out *ClustercodeStrategy)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *ClustercodeStrategy) DeepCopy() *ClustercodeStrategy
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new ClustercodeStrategy.



=== ClustercodeCountStrategy
[source, go]
----
type ClustercodeCountStrategy struct {
    MaxCount    int
}
----



==== MaxCount int



==== Receivers

===== DeepCopyInto
[source, go]
----
func (in *ClustercodeCountStrategy) DeepCopyInto(out *ClustercodeCountStrategy)
----

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non-nil.

===== DeepCopy
[source, go]
----
func (in *ClustercodeCountStrategy) DeepCopy() *ClustercodeCountStrategy
----

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new ClustercodeCountStrategy.




== Variable Typedefinitions

=== ClusterCodeUrl
[source, go]
----
type (
    StorageSpec struct {
        SourcePvc       ClusterCodeVolumeRef `json:"sourcePvc"`
        IntermediatePvc ClusterCodeVolumeRef `json:"intermediatePvc"`
        TargetPvc       ClusterCodeVolumeRef `json:"targetPvc"`
    }
    ClusterCodeVolumeRef struct {
        // +kubebuilder:validation:Required
        ClaimName string `json:"claimName"`
        SubPath   string `json:"subPath,omitempty"`
    }
    EncodeSpec struct {
        // +kubebuilder:default=-y;-hide_banner;-nostats
        DefaultCommandArgs []string `json:"defaultCommandArgs"`
        // +kubebuilder:default=-i;"\"${INPUT}\"";-c;copy;-map;0;-segment_time;"\"${SLICE_SIZE}\"";-f;segment;"\"${OUTPUT}\""
        SplitCommandArgs []string `json:"splitCommandArgs"`
        // +kubebuilder:default=-i;"\"${INPUT}\"";"-c:v";copy;"-c:a";copy;"\"${OUTPUT}\""
        TranscodeCommandArgs []string `json:"transcodeCommandArgs"`
        // +kubebuilder:default=-f;concat;-i;concat.txt;-c;copy;media_out.mkv
        MergeCommandArgs []string `json:"mergeCommandArgs"`

        SliceSize int `json:"sliceSize,omitempty"`
    }
    ClusterCodeUrl string
)
----



==== Receivers

===== GetRoot
[source, go]
----
func (u ClusterCodeUrl) GetRoot() string
----



===== GetPath
[source, go]
----
func (u ClusterCodeUrl) GetPath() string
----



===== StripSubPath
[source, go]
----
func (u ClusterCodeUrl) StripSubPath(subpath string) string
----



===== String
[source, go]
----
func (u ClusterCodeUrl) String() string
----





=== ClustercodeTaskId
[source, go]
----
type (
    // +kubebuilder:object:root=true
    // +kubebuilder:subresource:status
    // +kubebuilder:printcolumn:name="Source",type="string",JSONPath=".spec.sourceUrl",description="Source file name"
    // +kubebuilder:printcolumn:name="Target",type="string",JSONPath=".spec.targetUrl",description="Target file name"
    // +kubebuilder:printcolumn:name="Blueprint",type="string",JSONPath=`.metadata.ownerReferences[?(@.controller)].name`,description="Blueprint reference"
    // +kubebuilder:printcolumn:name="Slices",type="string",JSONPath=`.spec.slicesPlannedCount`,description="Clustercode Total Slices"
    // +kubebuilder:printcolumn:name="Age",type="date",JSONPath=".metadata.creationTimestamp"

    // Task is a projection out of a Blueprint
    Task struct {
        metav1.TypeMeta   `json:",inline"`
        metav1.ObjectMeta `json:"metadata,omitempty"`

        Spec   TaskSpec   `json:"spec,omitempty"`
        Status TaskStatus `json:"status,omitempty"`
    }

    // +kubebuilder:object:root=true

    // TaskList contains a list of Task
    TaskList struct {
        metav1.TypeMeta `json:",inline"`
        metav1.ListMeta `json:"metadata,omitempty"`
        Items           []Task `json:"items"`
    }

    // TaskSpec defines the desired state of Task.
    TaskSpec struct {
        TaskId               ClustercodeTaskId   `json:"taskId,omitempty"`
        Storage              StorageSpec         `json:"storage,omitempty"`
        SourceUrl            ClusterCodeUrl      `json:"sourceUrl,omitempty"`
        TargetUrl            ClusterCodeUrl      `json:"targetUrl,omitempty"`
        Suspend              bool                `json:"suspend,omitempty"`
        EncodeSpec           EncodeSpec          `json:"encodeSpec"`
        ServiceAccountName   string              `json:"serviceAccountName,omitempty"`
        FileListConfigMapRef string              `json:"fileListConfigMapRef,omitempty"`
        ConcurrencyStrategy  ClustercodeStrategy `json:"concurrencyStrategy,omitempty"`
        SlicesPlannedCount   int                 `json:"slicesPlannedCount,omitempty"`
    }

    TaskStatus struct {
        Conditions           []metav1.Condition    `json:"conditions,omitempty"`
        SlicesScheduledCount int                   `json:"slicesScheduledCount,omitempty"`
        SlicesFinishedCount  int                   `json:"slicesFinishedCount,omitempty"`
        SlicesScheduled      []ClustercodeSliceRef `json:"slicesScheduled,omitempty"`
        SlicesFinished       []ClustercodeSliceRef `json:"slicesFinished,omitempty"`
    }

    ClustercodeSliceRef struct {
        JobName    string `json:"jobName,omitempty"`
        SliceIndex int    `json:"sliceIndex"`
    }

    ClustercodeStrategy struct {
        ConcurrentCountStrategy *ClustercodeCountStrategy `json:"concurrentCountStrategy,omitempty"`
    }

    ClustercodeCountStrategy struct {
        MaxCount int `json:"maxCount,omitempty"`
    }
    ClustercodeTaskId string
)
----



==== Receivers

===== AsLabels
[source, go]
----
func (id ClustercodeTaskId) AsLabels() labels.Set
----



===== String
[source, go]
----
func (id ClustercodeTaskId) String() string
----






=== Constants

=== MediaFileDoneSuffix
[source, go]
----

----



=== ConfigMapFileName
[source, go]
----

----



=== ClustercodeTaskIdLabelKey
[source, go]
----

----



== Variables

=== GroupVersion
[source, go]
----
GroupVersion = schema.GroupVersion{Group: "clustercode.github.io", Version: "v1alpha1"}
----
GroupVersion is group version used to register these objects


=== SchemeBuilder
[source, go]
----
SchemeBuilder = &scheme.Builder{GroupVersion: GroupVersion}
----
SchemeBuilder is used to add go types to the GroupVersionKind scheme


=== AddToScheme
[source, go]
----
AddToScheme = SchemeBuilder.AddToScheme
----
AddToScheme adds the types in this group-version to the given scheme.



== Functions




=== ToUrl
[source, go]
----
func ToUrl(root, path string) ClusterCodeUrl
----
















































= package builder



== Interfaces

=== ContainerProperty
[source, go]
----
type ContainerProperty interface {
    Apply(b    *ContainerBuilder)
}
----
        


==== Apply(b *ContainerBuilder)



=== MetaProperty
[source, go]
----
type MetaProperty interface {
    Apply(b    *MetaBuilder)
}
----
        


==== Apply(b *MetaBuilder)



=== PodSpecProperty
[source, go]
----
type PodSpecProperty interface {
    Apply(b    *PodSpecBuilder)
}
----
        


==== Apply(b *PodSpecBuilder)




== Structs

=== KeyValueTuple
[source, go]
----
type KeyValueTuple struct {
    Key      string
    Value    string
}
----



==== Key string


==== Value string





=== ContainerBuilder
[source, go]
----
type ContainerBuilder struct {
    Container    *corev1.Container
}
----



==== Container *corev1.Container



==== Receivers

===== Build
[source, go]
----
func (b ContainerBuilder) Build(props ...ContainerProperty) ContainerBuilder
----





=== AddEnvValueFromConfigMap
[source, go]
----
type AddEnvValueFromConfigMap struct {
    ConfigMapName    string
    Key              string
}
----



==== ConfigMapName string


==== Key string



==== Receivers

===== Apply
[source, go]
----
func (p AddEnvValueFromConfigMap) Apply(b *ContainerBuilder)
----





=== AddEnvFromConfigMap
[source, go]
----
type AddEnvFromConfigMap struct {
    ConfigMapName    string
    Prefix           string
}
----



==== ConfigMapName string


==== Prefix string



==== Receivers

===== Apply
[source, go]
----
func (p AddEnvFromConfigMap) Apply(b *ContainerBuilder)
----





=== MetaBuilder
[source, go]
----
type MetaBuilder struct {
    ObjectMeta    metav1.Object
}
----



==== ObjectMeta metav1.Object



==== Receivers

===== Build
[source, go]
----
func (b MetaBuilder) Build(props ...MetaProperty) MetaBuilder
----





=== PodSpecBuilder
[source, go]
----
type PodSpecBuilder struct {
    PodSpec              *corev1.PodSpec
    ContainerBuilders    []ContainerBuilder
}
----



==== PodSpec *corev1.PodSpec


==== ContainerBuilders []ContainerBuilder



==== Receivers

===== Build
[source, go]
----
func (b PodSpecBuilder) Build(props ...PodSpecProperty) PodSpecBuilder
----





=== AddConfigMapMount
[source, go]
----
type AddConfigMapMount struct {
    ContainerBuilder    *ContainerBuilder
    ConfigMapName       string
    Name                string
    MountPath           string
    DefaultMode         *int32
}
----



==== ContainerBuilder *ContainerBuilder


==== ConfigMapName string


==== Name string


==== MountPath string


==== DefaultMode *int32



==== Receivers

===== Apply
[source, go]
----
func (p AddConfigMapMount) Apply(b *PodSpecBuilder)
----





=== AddPvcMount
[source, go]
----
type AddPvcMount struct {
    ContainerBuilder    *ContainerBuilder
    ClaimName           string
    VolumeName          string
    MountPath           string
    SubPath             string
}
----



==== ContainerBuilder *ContainerBuilder


==== ClaimName string


==== VolumeName string


==== MountPath string


==== SubPath string



==== Receivers

===== Apply
[source, go]
----
func (p AddPvcMount) Apply(b *PodSpecBuilder)
----






== Variable Typedefinitions

=== WithContainerName
[source, go]
----
type (
    ContainerProperty interface {
        Apply(b *ContainerBuilder)
    }

    ContainerBuilder struct {
        Container *corev1.Container
    }

    WithContainerName        string
    WithContainerImage       string
    WithImagePullPolicy      corev1.PullPolicy
    AddEnvVarValue           KeyValueTuple
    AddEnvValueFromConfigMap struct {
        ConfigMapName string
        Key           string
    }
    AddEnvFromConfigMap struct {
        ConfigMapName string
        Prefix        string
    }
    WithArgs       []string
    AddArg         string
    AddArgs        []string
    AddVolumeMount corev1.VolumeMount
)
----



==== Receivers

===== Apply
[source, go]
----
func (p WithContainerName) Apply(b *ContainerBuilder)
----





=== WithContainerImage
[source, go]
----
type (
    ContainerProperty interface {
        Apply(b *ContainerBuilder)
    }

    ContainerBuilder struct {
        Container *corev1.Container
    }

    WithContainerName        string
    WithContainerImage       string
    WithImagePullPolicy      corev1.PullPolicy
    AddEnvVarValue           KeyValueTuple
    AddEnvValueFromConfigMap struct {
        ConfigMapName string
        Key           string
    }
    AddEnvFromConfigMap struct {
        ConfigMapName string
        Prefix        string
    }
    WithArgs       []string
    AddArg         string
    AddArgs        []string
    AddVolumeMount corev1.VolumeMount
)
----



==== Receivers

===== Apply
[source, go]
----
func (p WithContainerImage) Apply(b *ContainerBuilder)
----





=== WithImagePullPolicy
[source, go]
----
type (
    ContainerProperty interface {
        Apply(b *ContainerBuilder)
    }

    ContainerBuilder struct {
        Container *corev1.Container
    }

    WithContainerName        string
    WithContainerImage       string
    WithImagePullPolicy      corev1.PullPolicy
    AddEnvVarValue           KeyValueTuple
    AddEnvValueFromConfigMap struct {
        ConfigMapName string
        Key           string
    }
    AddEnvFromConfigMap struct {
        ConfigMapName string
        Prefix        string
    }
    WithArgs       []string
    AddArg         string
    AddArgs        []string
    AddVolumeMount corev1.VolumeMount
)
----



==== Receivers

===== Apply
[source, go]
----
func (p WithImagePullPolicy) Apply(b *ContainerBuilder)
----





=== AddEnvVarValue
[source, go]
----
type (
    ContainerProperty interface {
        Apply(b *ContainerBuilder)
    }

    ContainerBuilder struct {
        Container *corev1.Container
    }

    WithContainerName        string
    WithContainerImage       string
    WithImagePullPolicy      corev1.PullPolicy
    AddEnvVarValue           KeyValueTuple
    AddEnvValueFromConfigMap struct {
        ConfigMapName string
        Key           string
    }
    AddEnvFromConfigMap struct {
        ConfigMapName string
        Prefix        string
    }
    WithArgs       []string
    AddArg         string
    AddArgs        []string
    AddVolumeMount corev1.VolumeMount
)
----



==== Receivers

===== Apply
[source, go]
----
func (p AddEnvVarValue) Apply(b *ContainerBuilder)
----





=== AddArg
[source, go]
----
type (
    ContainerProperty interface {
        Apply(b *ContainerBuilder)
    }

    ContainerBuilder struct {
        Container *corev1.Container
    }

    WithContainerName        string
    WithContainerImage       string
    WithImagePullPolicy      corev1.PullPolicy
    AddEnvVarValue           KeyValueTuple
    AddEnvValueFromConfigMap struct {
        ConfigMapName string
        Key           string
    }
    AddEnvFromConfigMap struct {
        ConfigMapName string
        Prefix        string
    }
    WithArgs       []string
    AddArg         string
    AddArgs        []string
    AddVolumeMount corev1.VolumeMount
)
----



==== Receivers

===== Apply
[source, go]
----
func (p AddArg) Apply(b *ContainerBuilder)
----





=== AddVolumeMount
[source, go]
----
type (
    ContainerProperty interface {
        Apply(b *ContainerBuilder)
    }

    ContainerBuilder struct {
        Container *corev1.Container
    }

    WithContainerName        string
    WithContainerImage       string
    WithImagePullPolicy      corev1.PullPolicy
    AddEnvVarValue           KeyValueTuple
    AddEnvValueFromConfigMap struct {
        ConfigMapName string
        Key           string
    }
    AddEnvFromConfigMap struct {
        ConfigMapName string
        Prefix        string
    }
    WithArgs       []string
    AddArg         string
    AddArgs        []string
    AddVolumeMount corev1.VolumeMount
)
----



==== Receivers

===== Apply
[source, go]
----
func (p AddVolumeMount) Apply(b *ContainerBuilder)
----





=== WithName
[source, go]
----
type (
    MetaProperty interface {
        Apply(b *MetaBuilder)
    }

    MetaBuilder struct {
        ObjectMeta metav1.Object
    }

    WithName           string
    WithNamespace      string
    WithNamespacedName types.NamespacedName
    WithLabels         labels.Set
    AddLabel           KeyValueTuple
)
----



==== Receivers

===== Apply
[source, go]
----
func (w WithName) Apply(b *MetaBuilder)
----





=== WithNamespace
[source, go]
----
type (
    MetaProperty interface {
        Apply(b *MetaBuilder)
    }

    MetaBuilder struct {
        ObjectMeta metav1.Object
    }

    WithName           string
    WithNamespace      string
    WithNamespacedName types.NamespacedName
    WithLabels         labels.Set
    AddLabel           KeyValueTuple
)
----



==== Receivers

===== Apply
[source, go]
----
func (w WithNamespace) Apply(b *MetaBuilder)
----





=== WithNamespacedName
[source, go]
----
type (
    MetaProperty interface {
        Apply(b *MetaBuilder)
    }

    MetaBuilder struct {
        ObjectMeta metav1.Object
    }

    WithName           string
    WithNamespace      string
    WithNamespacedName types.NamespacedName
    WithLabels         labels.Set
    AddLabel           KeyValueTuple
)
----



==== Receivers

===== Apply
[source, go]
----
func (w WithNamespacedName) Apply(b *MetaBuilder)
----





=== WithLabels
[source, go]
----
type (
    MetaProperty interface {
        Apply(b *MetaBuilder)
    }

    MetaBuilder struct {
        ObjectMeta metav1.Object
    }

    WithName           string
    WithNamespace      string
    WithNamespacedName types.NamespacedName
    WithLabels         labels.Set
    AddLabel           KeyValueTuple
)
----



==== Receivers

===== Apply
[source, go]
----
func (w WithLabels) Apply(b *MetaBuilder)
----





=== AddLabel
[source, go]
----
type (
    MetaProperty interface {
        Apply(b *MetaBuilder)
    }

    MetaBuilder struct {
        ObjectMeta metav1.Object
    }

    WithName           string
    WithNamespace      string
    WithNamespacedName types.NamespacedName
    WithLabels         labels.Set
    AddLabel           KeyValueTuple
)
----



==== Receivers

===== Apply
[source, go]
----
func (w AddLabel) Apply(b *MetaBuilder)
----





=== AddVolume
[source, go]
----
type (
    PodSpecProperty interface {
        Apply(b *PodSpecBuilder)
    }

    PodSpecBuilder struct {
        PodSpec           *corev1.PodSpec
        ContainerBuilders []ContainerBuilder
    }

    AddConfigMapMount struct {
        ContainerBuilder *ContainerBuilder
        ConfigMapName    string
        Name             string
        MountPath        string
        DefaultMode      *int32
    }
    AddPvcMount struct {
        ContainerBuilder *ContainerBuilder
        ClaimName        string
        VolumeName       string
        MountPath        string
        SubPath          string
    }
    AddVolume corev1.Volume
)
----



==== Receivers

===== Apply
[source, go]
----
func (p AddVolume) Apply(b *PodSpecBuilder)
----







== Functions

=== NewContainerBuilder
[source, go]
----
func NewContainerBuilder(containerName string) ContainerBuilder
----




=== NewContainerBuilderWith
[source, go]
----
func NewContainerBuilderWith(container *corev1.Container) ContainerBuilder
----















=== NewMetaBuilder
[source, go]
----
func NewMetaBuilder() MetaBuilder
----




=== NewMetaBuilderWith
[source, go]
----
func NewMetaBuilderWith(obj metav1.Object) MetaBuilder
----










=== NewPodSpecBuilder
[source, go]
----
func NewPodSpecBuilder(ctBuilders ...ContainerBuilder) PodSpecBuilder
----




=== NewPodSpecBuilderWith
[source, go]
----
func NewPodSpecBuilderWith(spec *corev1.PodSpec, ctBuilders ...ContainerBuilder) PodSpecBuilder
----











= package cfg


== Structs

=== Configuration
[source, go]
----
type Configuration struct {
    Operator     OperatorConfig
    Scan         ScanConfig
    Log          LogConfig
    Count        CountConfig
    Cleanup      CleanupConfig
    Namespace    string
}
----

Configuration holds a strongly-typed tree of the configuration

==== Operator OperatorConfig


==== Scan ScanConfig


==== Log LogConfig


==== Count CountConfig


==== Cleanup CleanupConfig


==== Namespace string



==== Receivers

===== ValidateSyntax
[source, go]
----
func (c Configuration) ValidateSyntax() error
----





=== OperatorConfig
[source, go]
----
type OperatorConfig struct {
    MetricsBindAddress           string
    EnableLeaderElection         bool
    WatchNamespace               string
    ClustercodeContainerImage    string
    FfmpegContainerImage         string
}
----

Configuration holds a strongly-typed tree of the configuration

==== MetricsBindAddress string


==== EnableLeaderElection bool
Enabling this will ensure there is only one active controller manager.

==== WatchNamespace string


==== ClustercodeContainerImage string


==== FfmpegContainerImage string





=== LogConfig
[source, go]
----
type LogConfig struct {
    Debug    bool
}
----

Configuration holds a strongly-typed tree of the configuration

==== Debug bool





=== ScanConfig
[source, go]
----
type ScanConfig struct {
    RoleKind         string
    RoleName         string
    BlueprintName    string
    SourceRoot       string
    TargetRoot       string
}
----

Configuration holds a strongly-typed tree of the configuration

==== RoleKind string


==== RoleName string


==== BlueprintName string


==== SourceRoot string


==== TargetRoot string





=== CountConfig
[source, go]
----
type CountConfig struct {
    TaskName    string
}
----

Configuration holds a strongly-typed tree of the configuration

==== TaskName string





=== CleanupConfig
[source, go]
----
type CleanupConfig struct {
    TaskName    string
}
----

Configuration holds a strongly-typed tree of the configuration

==== TaskName string






=== Constants

=== ClusterRole
[source, go]
----

----



=== Role
[source, go]
----

----



== Variables

=== Config
[source, go]
----

----




== Functions

=== NewDefaultConfig
[source, go]
----
func NewDefaultConfig() *Configuration
----

NewDefaultConfig retrieves the config with sane defaults




= package cmd



== Variables















== Functions















=== Execute
[source, go]
----
func Execute()
----

Execute adds all child commands to the root command and sets flags appropriately.
This is called by main.main(). It only needs to happen once to the rootCmd.







=== SetVersion
[source, go]
----
func SetVersion(v string)
----

SetVersion sets the version string in the help messages














= package controllers



== Structs

=== BlueprintReconciler
[source, go]
----
type BlueprintReconciler struct {
    Client    client.Client
    Log       logr.Logger
    Scheme    *runtime.Scheme
}
----



==== Client client.Client


==== Log logr.Logger


==== Scheme *runtime.Scheme



==== Receivers

===== SetupWithManager
[source, go]
----
func (r *BlueprintReconciler) SetupWithManager(mgr ctrl.Manager) error
----



===== Reconcile
[source, go]
----
func (r *BlueprintReconciler) Reconcile(ctx context.Context, req ctrl.Request) (ctrl.Result, error)
----





=== BlueprintContext
[source, go]
----
type BlueprintContext struct {
}
----









=== JobReconciler
[source, go]
----
type JobReconciler struct {
    Client    client.Client
    Log       logr.Logger
    Scheme    *runtime.Scheme
}
----



==== Client client.Client


==== Log logr.Logger


==== Scheme *runtime.Scheme



==== Receivers

===== SetupWithManager
[source, go]
----
func (r *JobReconciler) SetupWithManager(mgr ctrl.Manager) error
----



===== Reconcile
[source, go]
----
func (r *JobReconciler) Reconcile(ctx context.Context, req ctrl.Request) (ctrl.Result, error)
----





=== JobContext
[source, go]
----
type JobContext struct {
}
----









==== Receivers



=== TaskReconciler
[source, go]
----
type TaskReconciler struct {
    Client    client.Client
    Log       logr.Logger
    Scheme    *runtime.Scheme
}
----



==== Client client.Client


==== Log logr.Logger


==== Scheme *runtime.Scheme



==== Receivers

===== SetupWithManager
[source, go]
----
func (r *TaskReconciler) SetupWithManager(mgr ctrl.Manager) error
----



===== Reconcile
[source, go]
----
func (r *TaskReconciler) Reconcile(ctx context.Context, req ctrl.Request) (ctrl.Result, error)
----





=== TaskContext
[source, go]
----
type TaskContext struct {
}
----










=== TaskOpts
[source, go]
----
type TaskOpts struct {
}
----













== Variable Typedefinitions

=== ClusterCodeJobType
[source, go]
----
type (
    ClusterCodeJobType string
)
----



==== Receivers

===== AsLabels
[source, go]
----
func (t ClusterCodeJobType) AsLabels() labels.Set
----



===== String
[source, go]
----
func (t ClusterCodeJobType) String() string
----






=== Constants

=== SourceSubMountPath
[source, go]
----

----



=== TargetSubMountPath
[source, go]
----

----



=== IntermediateSubMountPath
[source, go]
----

----



=== ConfigSubMountPath
[source, go]
----

----



=== ClustercodeTypeLabelKey
[source, go]
----

----



=== ClustercodeSliceIndexLabelKey
[source, go]
----

----



=== ClustercodeTypeScan
[source, go]
----

----



=== ClustercodeTypeSplit
[source, go]
----

----



=== ClustercodeTypeSlice
[source, go]
----

----



=== ClustercodeTypeCount
[source, go]
----

----



=== ClustercodeTypeMerge
[source, go]
----

----



=== ClustercodeTypeCleanup
[source, go]
----

----



== Variables

=== ClusterCodeLabels
[source, go]
----

----



=== ClustercodeTypes
[source, go]
----

----




== Functions


































